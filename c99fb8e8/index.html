<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="技术猿 攻城狮"><meta name="keywords" content="ocserv, vpn,"><title>CentOS 7 搭建 OpenConnect Server VPN - 高脚猪</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/images/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">CentOS 7 搭建 OpenConnect Server VPN</h1><ul class="meta"><li><i class="icon icon-author"></i>公子青</li><li><i class="icon icon-clock"></i>47 Minutes</li><li><i class="icon icon-calendar"></i>December 17, 2017</li></ul></div></div><div class="article-content" style="max-width:800px"><p>出于众所周知的原因，现使用OpenConnect Server（ocserv）作为服务端，Shimo（macOS）、anyconnect（win、iOS）作为客户端，搭建个人电子设备装机必备环境，实现按需路由：”大局域网”走本地网关默认路由，特定应用（IP）走域外VPS作为基础的ocserv出口。</p>
<blockquote>
<p>OpenConnect server (ocserv) is an SSL VPN server. Its purpose is to be a secure, small, fast and configurable VPN server. It implements the OpenConnect SSL VPN protocol, and has also (currently experimental) compatibility with clients using the AnyConnect SSL VPN protocol. The OpenConnect protocol provides a dual TCP/UDP VPN channel, and uses the standard IETF security protocols to secure it. The server is implemented primarily for the GNU/Linux platform but its code is designed to be portable to other UNIX variants as well.</p>
</blockquote>
<!-- -->
<blockquote>
<p>OpenConnect server (ocserv)以一款SSL VPN服务。它的目的是构建安全、小巧、快速以及容易配置的 VPN服务器。它实现了OpenConnect SSL VPN协议，并且也兼容AnyConnect SSL VPN协议客户端。 OpenConnect协议提供了基于TCP/UDP的双重VPN隧道，使用标准的IETF加密协议。该服务主要面向 GNU/Linux平台。</p>
</blockquote>
<h1 id="1-基本环境"><a href="#1-基本环境" class="headerlink" title="1 基本环境"></a>1 基本环境</h1><ul>
<li>CentOS Linux release 7.2.1511 (Core)  (IP: 1.1.1.1)</li>
<li>ocserv 0.11.9</li>
<li>macOS High Sierra Version 10.13.2</li>
<li>iOS 11.2.1</li>
<li>Microsoft Windows 10 专业版 (10.0.15063)</li>
<li>anyconnect-win-4.4.03034</li>
<li>Shimo Version 4.1.5.1</li>
</ul>
<h1 id="2-ocserv安装"><a href="#2-ocserv安装" class="headerlink" title="2 ocserv安装"></a>2 ocserv安装</h1><h2 id="2-1-安装ocserv"><a href="#2-1-安装ocserv" class="headerlink" title="2.1 安装ocserv"></a>2.1 安装ocserv</h2><p>ocserv可以通过epel使用yum安装。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y epel-release</span><br><span class="line">yum install -y ocserv</span><br></pre></td></tr></table></figure>
<h2 id="2-2-配置"><a href="#2-2-配置" class="headerlink" title="2.2 配置"></a>2.2 配置</h2><h3 id="2-2-1-证书配置"><a href="#2-2-1-证书配置" class="headerlink" title="2.2.1 证书配置"></a>2.2.1 证书配置</h3><p><strong>1.创建文件夹存放ocserv所使用的证书</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/ocserv/ssl/private    #用于存放服务器私钥</span><br><span class="line">mkdir -p /etc/ocserv/ssl/ca         #用于存放CA</span><br><span class="line">mkdir -p /etc/ocserv/ssl/server     #用于存放服务器证书</span><br><span class="line">mkdir -p /etc/ocserv/ssl/users      #用于存放用户证书</span><br></pre></td></tr></table></figure>
<p><strong>2.CA证书</strong></p>
<p>生成CA私钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ocserv/ssl/private</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certtool --generate-privkey --outfile ca-key.pem</span><br></pre></td></tr></table></figure>
<p>复制ca-key.pem证书到ocserv/ssl/目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ca-key.pem ../</span><br></pre></td></tr></table></figure>
<p>生成CA模版，其中cn和organization内容为自定义。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ocserv/ssl/ca</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; ca.tmpl</span><br><span class="line">cn = &quot;cn&quot;</span><br><span class="line">organization = &quot;organization&quot;</span><br><span class="line">serial = 1</span><br><span class="line">expiration_days = 3650</span><br><span class="line">ca</span><br><span class="line">signing_key</span><br><span class="line">cert_signing_key</span><br><span class="line">crl_signing_key</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>生成自签CA证书</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certtool --generate-self-signed --load-privkey ../private/ca-key.pem --template ca.tmpl --outfile ca-cert.pem</span><br></pre></td></tr></table></figure>
<p>复制CA证书到ocserv/ssl/目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ca-cert.pem ../</span><br></pre></td></tr></table></figure>
<p><strong>3.server证书</strong></p>
<p>生成server私钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ocserv/ssl/private</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certtool --generate-privkey --outfile server-key.pem</span><br></pre></td></tr></table></figure>
<p>复制server-key.pem证书到ocserv/ssl目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp server-cert.pem ../</span><br></pre></td></tr></table></figure>
<p>生成server证书模版，其中cn内容为ocserv服务器地址，本文假定使用1.1.1.1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ocserv/ssl/server</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; server.tmpl</span><br><span class="line">cn = &quot;1.1.1.1&quot;</span><br><span class="line">organization = &quot;organization&quot;</span><br><span class="line">expiration_days = 3650</span><br><span class="line">signing_key</span><br><span class="line">encryption_key </span><br><span class="line">tls_www_server</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>生成server证书</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">certtool --generate-certificate --load-privkey ../private/server-key.pem --load-ca-certificate ../ca/ca-cert.pem --load-ca-privkey ../private/ca-key.pem --template server.tmpl --outfile server-cert.pem</span><br></pre></td></tr></table></figure>
<p>复制server-cert.pem证书到ocserv/ssl/目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp server-cert.pem ../</span><br></pre></td></tr></table></figure>
<p><strong>4.客户端证书</strong></p>
<p>ocserv支持用户+密码、radius、证书认证，本文使用免密码证书认证方式。<br>创建生成客户端的证书脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ocserv/ssl/users</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> cat &gt;gen-client-cert.sh &lt;&lt;EOF</span><br><span class="line">#!/bin/bash</span><br><span class="line">USER=$1</span><br><span class="line">CA_DIR=$2</span><br><span class="line">SERIAL=`date +%s`</span><br><span class="line">certtool --generate-privkey --outfile $USER-key.pem</span><br><span class="line">cat &lt;&lt; _EOF_ &gt;user.tmpl</span><br><span class="line">cn = &quot;$USER&quot;</span><br><span class="line">unit = &quot;users&quot;</span><br><span class="line">serial = &quot;$SERIAL&quot;</span><br><span class="line">expiration_days = 9999</span><br><span class="line">signing_key</span><br><span class="line">tls_www_client</span><br><span class="line">_EOF_</span><br><span class="line">certtool --generate-certificate --load-privkey $USER-key.pem --load-ca-certificate $CA_DIR/ca-cert.pem --load-ca-privkey $CA_DIR/ca-key.pem --template user.tmpl --outfile $USER-cert.pem</span><br><span class="line">openssl pkcs12 -export -inkey $USER-key.pem -in $USER-cert.pem -name &quot;$USER VPN Client Cert&quot; -certfile $CA_DIR/ca-cert.pem -out $USER.p12</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>分配可执行权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chomd 700 gen-client-cert.sh</span><br></pre></td></tr></table></figure>
<p>生成客户端证书 (其中<code>./gen-client-cert.sh</code>指脚本，<code>user1</code>指要创建的用户客户端名称，<code>..</code>指CA证书所在路径)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gen-client-cert.sh user1 ..</span><br></pre></td></tr></table></figure>
<p><strong><em>注：</em></strong> <em>上述生成客户端中证书过程中会提示输入密码，直接回车代表无密码。此处将生成<code>user1.p12</code>用户客户端证书文件</em></p>
<blockquote>
<p><strong><em>更新（2017-12-17）：</em></strong> <em>在重搭检查校验过程中发现<code>./gen-client-cert.sh user1 ..</code>执行报错，经检查发现SecureCRT macOS 8.1版本在粘贴上述建立<code>gen-client-cert.sh</code>脚本时,该内容的变量部分（如：<code>$1</code>、<code>$USER</code>）会自动替换成当前用户，当然可能并不是CRT的锅～～～，解决方法为手工vi建立该脚本</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi gen-client-cert.sh</span><br></pre></td></tr></table></figure></p>
<p>按字母<code>i</code>进入编辑试图，粘贴如下内容，再按<code>:wq</code>保存并退出。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">USER=$1</span><br><span class="line">CA_DIR=$2</span><br><span class="line">SERIAL=`date +%s`</span><br><span class="line">certtool --generate-privkey --outfile $USER-key.pem</span><br><span class="line">cat &lt;&lt; _EOF_ &gt;user.tmpl</span><br><span class="line">cn = &quot;$USER&quot;</span><br><span class="line">unit = &quot;users&quot;</span><br><span class="line">serial = &quot;$SERIAL&quot;</span><br><span class="line">expiration_days = 9999</span><br><span class="line">signing_key</span><br><span class="line">tls_www_client</span><br><span class="line">_EOF_</span><br><span class="line">certtool --generate-certificate --load-privkey $USER-key.pem --load-ca-certificate $CA_DIR/ca-cert.pem --load-ca-privkey $CA_DIR/ca-key.pem --template user.tmpl --outfile $USER-cert.pem</span><br><span class="line">openssl pkcs12 -export -inkey $USER-key.pem -in $USER-cert.pem -name &quot;$USER VPN Client Cert&quot; -certfile $CA_DIR/ca-cert.pem -out $USER.p12</span><br></pre></td></tr></table></figure>
</blockquote>
<p>将<code>user1.p12</code>用户客户端证书文件，通过http或者其它途径导入客户端作为登录客户端登录凭证。用户证书吊销，懒不写了,可参见文末参考文章。 </p>
<h3 id="2-2-2-系统配置"><a href="#2-2-2-系统配置" class="headerlink" title="2.2.2 系统配置"></a>2.2.2 系统配置</h3><p><strong>1.ocserv配置</strong></p>
<p>备份ocserv配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/ocserv</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ocserv.conf ocserv.conf.bak.init</span><br></pre></td></tr></table></figure>
<p>并使用<code>vi ocserv.conf</code>修改如下部分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># 使用证书方式认证，注销其它方式</span><br><span class="line">auth = &quot;certificate&quot;</span><br><span class="line">#auth = &quot;pam&quot;</span><br><span class="line">#auth = &quot;pam[gid-min=1000]&quot;</span><br><span class="line">#auth = &quot;plain[passwd=./sample.passwd,otp=./sample.otp]&quot;</span><br><span class="line">#auth = &quot;certificate&quot;</span><br><span class="line">#auth = &quot;radius[config=/etc/radiusclient/radiusclient.conf,groupconfig=true]&quot;</span><br><span class="line"></span><br><span class="line"># 指定server证书</span><br><span class="line">server-cert = /etc/ocserv/ssl/server-cert.pem</span><br><span class="line">server-key = /etc/ocserv/ssl/server-key.pem</span><br><span class="line"></span><br><span class="line"># 指定ca证书</span><br><span class="line">ca-cert = /etc/ocserv/ssl/ca-cert.pem</span><br><span class="line"></span><br><span class="line"># The object identifier that will be used to read the user ID in the client</span><br><span class="line"># certificate. The object identifier should be part of the certificate&apos;s DN</span><br><span class="line"># Useful OIDs are:</span><br><span class="line">#  CN = 2.5.4.3, UID = 0.9.2342.19200300.100.1.1</span><br><span class="line"># cert-user-oid = 0.9.2342.19200300.100.1.1</span><br><span class="line">cert-user-oid = 2.5.4.3</span><br><span class="line"></span><br><span class="line"># 设定客户端分配地址段，按需分配。本文使用10.20.30.32/27，别问我为什么，任性</span><br><span class="line">ipv4-network = 10.20.30.32</span><br><span class="line">ipv4-netmask = 255.255.255.224</span><br><span class="line"></span><br><span class="line"># 设定客户端使用dns,按需配置</span><br><span class="line">dns = 8.8.8.8</span><br><span class="line">dns = 9.9.9.9</span><br><span class="line"></span><br><span class="line"># 设定路由，此处按需配置，defalut代表默认所有走vpn</span><br><span class="line">route = default</span><br><span class="line">#route = 10.10.10.0/255.255.255.0</span><br><span class="line">#route = 192.168.0.0/255.255.0.0</span><br><span class="line">#route = fef4:db8:1000:1001::/64</span><br><span class="line"></span><br><span class="line"># 设定vpn客户端不走vpn通道部分，按需</span><br><span class="line">#no-route = 192.168.5.0/255.255.255.0</span><br><span class="line"></span><br><span class="line"># The following options are for (experimental) AnyConnect client compatibility.</span><br><span class="line">cisco-client-compat = true</span><br></pre></td></tr></table></figure>
<p><strong><em>注意：</em></strong> <em><code>route</code>、<code>no-route</code>不能同时使用</em></p>
<p><strong>2.系统配置</strong></p>
<p>开启系统转发,在文件插入<code>net.ipv4.ip_forward=1</code>,并刷新配置<code>sysctl -p /usr/lib/sysctl.d/00-system.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/lib/sysctl.d/00-system.conf</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">net.bridge.bridge-nf-call-ip6tables = 0</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 0</span><br><span class="line">net.bridge.bridge-nf-call-arptables = 0</span><br><span class="line">net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p /usr/lib/sysctl.d/00-system.conf</span><br></pre></td></tr></table></figure>
<p>防火墙配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-port=443/tcp</span><br><span class="line">firewall-cmd --permanent --zone=public --add-port=443/udp</span><br><span class="line">firewall-cmd --permanent --zone=public --add-masquerade</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br><span class="line">#以下常用检查命令，非搭建本ocserv必须执行部分</span><br><span class="line">firewall-cmd --zone=public --query-masquerade # 查看某区域是否开启masquerade</span><br><span class="line">firewall-cmd --get-active-zones 	# 查询区域信息</span><br><span class="line">firewall-cmd --zone=public --list-ports  # 查看开发端口信息</span><br><span class="line">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure>
<p><strong><em>注：</em></strong> <em>本文使用环境centos 7.2 最小化安装搭建，系统默认防火墙为firewalld，而大多vps主机可能无firewalld。然后在搭建ocserv服务查找资料过程中发现，大多网文的做法是卸载firewalld改用iptables，不科学、不合理吧，所以咯，自己动手。同理，很多文章只介绍如何搭建ocserv服务，却没有说明客户端如何使用，靠，，，再次自己动手，本文尽量做到完整， <del>全面。</del> </em></p>
<p>启动ocserv服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">systemctl start ocserv 	# 启动ocserv服务</span><br><span class="line">systemctl status ocserv # 查看ocserv状态</span><br><span class="line">systemctl enable ocserv # 设置ocserv开机自启动</span><br><span class="line"></span><br><span class="line">#以下常用检查命令，非搭建本ocserv必须执行部分</span><br><span class="line">systemctl restart ocserv # 重启ocserv服务</span><br><span class="line">ss -anp |grep 443   # 检查端口为443的网络活动</span><br><span class="line">ps -ef |grep ocserv # 查找名为ocserv的进程</span><br></pre></td></tr></table></figure>
<h1 id="3-客户端使用"><a href="#3-客户端使用" class="headerlink" title="3 客户端使用"></a>3 客户端使用</h1><p>导入前文生成的<code>user1.p12</code>作为终端登录凭证，本文分别使用anyconnect、shimo、anycommect作为iOS、macOS、win客户端。并利用win IIS作为iOS anyconnect下载证书的web平台。当然读者可用ocserv服务器搭建ngnix或者其他什么的作为web。为什么是iis，因为其它的不熟，，，</p>
<h2 id="3-1-客户端导入用户证书"><a href="#3-1-客户端导入用户证书" class="headerlink" title="3.1 客户端导入用户证书"></a>3.1 客户端导入用户证书</h2><p>使用sftp下载<code>user1.p12</code>到本地（win10）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get /etc/ocserv/ssl/users/user1.p12</span><br></pre></td></tr></table></figure>
<p><strong>IIS搭建</strong></p>
<blockquote>
<p>鼠标右键任务栏‘开始按钮’&gt;应用和功能&gt;程序和功能&gt;启用和关闭windows功能</p>
<p>勾选Internet Information Services&gt;确定</p>
<p><img src="/images/1.1.jpg" alt=""></p>
<p>单机任务栏开始菜单&gt;windwos管理工具&gt;Internet Information Services管理器</p>
<p>展开网站，选中默认网站，单机右侧“基本设置”</p>
<p>如下图设置，其中路径自定义指定，并把<code>user1.p12</code>移动到该目录，“连接为…”设置web默认使用什么账户权限，可临时使用administrator，客户端获取证书完成后再关闭web或者卸载iis。</p>
<p><img src="/images/1.2.jpg" alt=""></p>
<p>双击“MIME类型”设置，后缀<code>*.p12</code>iis的处理方式，添加后缀为<code>p12</code>类型为<code>application/x-pkcs12</code></p>
<p><img src="/images/1.3.jpg" alt=""></p>
<p>开放本地防火墙80端口，允许客户端访问下载用户证书文件</p>
<p>鼠标右键任务栏网络图标&gt;打开网络和共享中心&gt;windwos防火墙&gt;允许应用或功能通过windws防火墙&gt;更改设置&gt;勾选或添加万维网服务。</p>
<p><img src="/images/1.4.jpg" alt=""></p>
<p>打开浏览器，下载验证</p>
<p><img src="/images/1.5.jpg" alt=""></p>
</blockquote>
<h2 id="3-2-使用ocserv"><a href="#3-2-使用ocserv" class="headerlink" title="3.2 使用ocserv"></a>3.2 使用ocserv</h2><p>万里长征最后一里，终于到客户端步骤了。</p>
<h3 id="3-2-1-iOS客户端使用"><a href="#3-2-1-iOS客户端使用" class="headerlink" title="3.2.1 iOS客户端使用"></a>3.2.1 iOS客户端使用</h3><p>app store 下载客户端“AnyConnect”，启动应用.</p>
<p>Diagnostics&gt;Certificates&gt;import user certificate…&gt;输入下载地址“<a href="http://x.x.x.x/user1.p12”" target="_blank" rel="noopener">http://x.x.x.x/user1.p12”</a></p>
<p><img src="/images/1.6.png" alt=""><br><img src="/images/1.7.png" alt=""></p>
<p>Home&gt;connections&gt;Add VPN Connection…&gt;填写服务器信息：描述、ocserv服务器地址&gt;Advanced&gt;Certificate&gt;选中“user1”&gt;保存</p>
<p>启动vpn连接 Home&gt;AnyConnect VPN，并选择 Continue继续</p>
<p>客户端详细信息可以在 Details&gt;Statistics查看</p>
<p><img src="/images/1.8.png" alt=""><br><img src="/images/1.9.png" alt=""></p>
<h3 id="3-2-2-mac客户端使用"><a href="#3-2-2-mac客户端使用" class="headerlink" title="3.2.2 mac客户端使用"></a>3.2.2 mac客户端使用</h3><p>下载并安装、运行Shimo应用，</p>
<p>单机任务栏Shimo&gt;Preferences&gt;Accounts&gt;左下角+&gt;Cisco SSL&gt;Create…</p>
<p>输入服务器地址，本文使用证书登录，故用户、密码留空，单机 Create</p>
<p><img src="/images/1.10.png" alt=""></p>
<p>选中刚刚创建的条目，右下角单机Edit，在basic栏目，Authentication Method项目中的Certificate指定用户证书<code>user1.p12</code>，保存</p>
<p><img src="/images/1.11.png" alt=""></p>
<p>回到Accounts，启动vpn,并选中Accept。</p>
<p><img src="/images/1.12.png" alt=""></p>
<p>单机任务了Shimo，选择connection status可查看客户端信息</p>
<p><img src="/images/1.13.png" alt=""></p>
<h3 id="3-2-3-win客户端使用"><a href="#3-2-3-win客户端使用" class="headerlink" title="3.2.3 win客户端使用"></a>3.2.3 win客户端使用</h3><p>win端，尝试过，但失败了，因为现实需求考虑，不往下走了，读者可参见文末链接部分。</p>
<h1 id="4-定制路由"><a href="#4-定制路由" class="headerlink" title="4 定制路由"></a>4 定制路由</h1><p><strong><em>本部分类容为私人笔记，仅供参考。</em></strong> 用户可以按实际需求，定制路由。比如：默认走网关，特定地址走vpn；默认走vpn，特定地址走网关；所有走vpn。注意事项是最大支持64条自定义路由。注意事项是ocserv配置文件中<code>route</code> <code>no-route</code>不能同时使用。下为个人收集ip、域名信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line">#2017-11-20 域外app域名及ip dns8.8.8.8  vps地址AWS-Tokyo</span><br><span class="line"></span><br><span class="line">#iOS</span><br><span class="line">	configuration.apple.com</span><br><span class="line">	init.itunes.apple.com</span><br><span class="line">	device-prisioning.googleapis.com</span><br><span class="line">	15-courier.push.apple.com</span><br><span class="line">	gateway.icloud.com</span><br><span class="line">	itunes.apple.com</span><br><span class="line">#google</span><br><span class="line">	google.com</span><br><span class="line">	gmail.com</span><br><span class="line">	youtube.com</span><br><span class="line">	www.google.com.hk</span><br><span class="line">#duckducogo.com</span><br><span class="line">	46.0.0.0/8</span><br><span class="line">#twitter</span><br><span class="line">	twitter.com</span><br><span class="line">	twimg.com</span><br><span class="line">	api.twitter.com</span><br><span class="line">#telnetgram</span><br><span class="line">	 149.154.0.0/16</span><br><span class="line">	 91.0.0.0/8</span><br><span class="line">#wikileeaks.org</span><br><span class="line">	 95.0.0.0/8</span><br><span class="line">#facebook</span><br><span class="line">	 graph.facebook.com</span><br><span class="line">	 b-graph.facebook.com</span><br><span class="line">#api.weather.com</span><br><span class="line">	23.0.0.0/12</span><br><span class="line">	104.64.0.0/10</span><br><span class="line">#proton.flurry.com</span><br><span class="line">#data.flurry.com</span><br><span class="line">	proton.flurry.com</span><br><span class="line">	68.142.192.0/18</span><br><span class="line">#settings.crashlytics.com</span><br><span class="line">	23.20.0.0/14</span><br><span class="line">#api-m.paypal.com</span><br><span class="line">#www.paypalobjects.com</span><br><span class="line">#b.stats.paypal.com</span><br><span class="line">#analytics.query.yahoo.com</span><br><span class="line">#stats.appsflyer.com</span><br><span class="line">#t.appsflyer.com</span><br><span class="line">#stats.appsflyer.com</span><br><span class="line">#e.crashlytics.com</span><br><span class="line">#chatrelay.bittorrent.com</span><br><span class="line">#textsecure-service.whispersystems.org</span><br><span class="line">#ws.batch.com</span><br><span class="line">#events.mobile.optimizely.com</span><br><span class="line">#s3.amazonaws.com</span><br><span class="line">#workflow.is</span><br><span class="line">#stats.justyo.co</span><br><span class="line">#z.moatads.com</span><br><span class="line">#sb.scorecardresearch.com</span><br><span class="line">#buffalo-ios.ifttt.com</span><br><span class="line">#shimovpn</span><br><span class="line">#www.ip138.com</span><br><span class="line"></span><br><span class="line">#CIDR汇总</span><br><span class="line">	184.24.0.0/13</span><br><span class="line">	104.244.40.0/21</span><br><span class="line">	104.64.0.0/10</span><br><span class="line">	107.178.192.0/18</span><br><span class="line">	17.0.0.0/8</span><br><span class="line">	172.217.0.0/16</span><br><span class="line">	174.129.0.0/16</span><br><span class="line">	173.0.80.0/20</span><br><span class="line">	176.28.32.0/21</span><br><span class="line">	147.135.128.0/17</span><br><span class="line">	157.240.0.0/16</span><br><span class="line">	116.0.0.0/8</span><br><span class="line">	119.0.0.0/8</span><br><span class="line">	149.154.0.0/16</span><br><span class="line">	124.0.0.0/8</span><br><span class="line">	203.130.55.109/32	#ip138.com</span><br><span class="line">	240.0.0.0/4</span><br><span class="line">	216.58.192.0/19</span><br><span class="line">	216.115.96.0/20</span><br><span class="line">	210.0.0.0/8</span><br><span class="line">	8.0.0.0/8</span><br><span class="line">	88.0.0.0/8</span><br><span class="line">	91.0.0.0/8</span><br><span class="line">	95.0.0.0/8</span><br><span class="line">	54.80.0.0/12</span><br><span class="line">	54.72.0.0/13</span><br><span class="line">	54.240.0.0/12</span><br><span class="line">	54.224.0.0/12</span><br><span class="line">	54.192.0.0/12</span><br><span class="line">	52.208.0.0/13</span><br><span class="line">	52.192.0.0/11</span><br><span class="line">	52.88.0.0/13</span><br><span class="line">	52.84.0.0/14</span><br><span class="line">	52.48.0.0/14</span><br><span class="line">	52.32.0.0/11</span><br><span class="line">	50.16.0.0/14</span><br><span class="line">	46.0.0.0/8</span><br><span class="line">	4.0.0.0/8</span><br><span class="line">	31.0.0.0/8</span><br><span class="line">	34.192.0.0/10</span><br><span class="line">	23.0.0.0/12</span><br><span class="line">	23.20.0.0/14</span><br><span class="line">	23.32.0.0/11</span><br><span class="line">	23.64.0.0/14</span><br><span class="line">	23.192.0.0/11</span><br><span class="line">	68.142.192.0/18</span><br><span class="line">	66.6.32.0/20</span><br><span class="line">	69.147.64.0/18</span><br><span class="line">	64.4.240.0/21</span><br><span class="line">	64.4.248.0/22</span><br><span class="line">	74.6.0.0/16</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##################################################</span><br><span class="line"></span><br><span class="line">##2017-11-20国内日用地址  dns8.8.8.8	AWS-Tokyo</span><br><span class="line">#wechat</span><br><span class="line">	183.232.96.107:443</span><br><span class="line">	203.205.151.193:80</span><br><span class="line">#QQ</span><br><span class="line">	203.205.158.62:443</span><br><span class="line">	203.205.142.168</span><br><span class="line">	203.205.151.50:443</span><br><span class="line">	183.57.48.91</span><br><span class="line">	140.207.123.187:80 </span><br><span class="line">	103.7.30.100</span><br><span class="line">	14.17.42.37:14000 </span><br><span class="line"></span><br><span class="line">#IP.cn</span><br><span class="line">	23.239.1.72</span><br><span class="line">#网易云音乐</span><br><span class="line">	103.211.228.142:443</span><br><span class="line">	1.1.1.1:80</span><br><span class="line">	103.211.228.142</span><br><span class="line">	223.252.199.69:6003</span><br><span class="line">	114.134.80.166:443</span><br><span class="line"></span><br><span class="line">#CIDR合并</span><br><span class="line">	1.1.1.1/24		</span><br><span class="line">	14.16.0.0/12	//16～31</span><br><span class="line">	103.7.28.0/22	//28～31</span><br><span class="line">	103.211.228.0/22	//228～231</span><br><span class="line">	114.134.80.0/24</span><br><span class="line">	140.206.0.0/15	//206～207</span><br><span class="line">	183.192.0.0/9	//扩大话处理，准确是192～255</span><br><span class="line">	183.0.0.0/10	//0～63</span><br><span class="line">	203.205.128.0/19	//128～259</span><br><span class="line">	223.252.192.0/19	//192～223</span><br><span class="line">	23.111.248.0/8	//23.111.248.0 - 23.252.65.255</span><br><span class="line">	103.211.228.0/22	//228～231</span><br><span class="line"></span><br><span class="line">##2017-11-17国内日用地址  dns223.5.5.5 119.29.29.29 8.8.8.8	电信</span><br><span class="line"></span><br><span class="line">#wechat</span><br><span class="line">	59.37.97.23:443	#mac-app</span><br><span class="line">	101.227.169.159	#weixin.qq.com</span><br><span class="line"></span><br><span class="line">#网易云音乐</span><br><span class="line">	223.252.199.69:6003	#mac-app</span><br><span class="line">	59.111.160.195	#music.163.com</span><br><span class="line"></span><br><span class="line">#QQ</span><br><span class="line">	14.17.32.211	#qq.com</span><br><span class="line">	61.151.168.139:80</span><br><span class="line">	61.151.225.32:80</span><br><span class="line">	183.36.108.140:14000</span><br><span class="line">	183.66.103.146:80</span><br><span class="line">	183.36.108.140:14000</span><br><span class="line">	183.57.48.91	#weiyun.com</span><br><span class="line">	183.3.226.30:80</span><br><span class="line">	101.226.90.186:80</span><br><span class="line">	180.97.8.111:443</span><br><span class="line">	180.163.21.59	#user.qzone.qq.com</span><br><span class="line">	14.215.140.64:80</span><br><span class="line">	14.215.138.22:80</span><br><span class="line">	182.150.10.139:80</span><br><span class="line">	118.112.22.144:443</span><br><span class="line">	113.105.73.144:80</span><br><span class="line">	125.94.49.26:80</span><br><span class="line"></span><br><span class="line">#dingding</span><br><span class="line">	59.63.233.95:443</span><br><span class="line">	140.205.254.81:443</span><br><span class="line">	140.205.32.80:443 </span><br><span class="line">	140.205.34.62:443</span><br><span class="line">	140.205.34.62		#dingtalk.com</span><br><span class="line">	140.205.34.53:443</span><br><span class="line">	140.205.134.70:443</span><br><span class="line">	140.205.172.18:443 </span><br><span class="line">	140.205.254.81:443</span><br><span class="line">	140.205.164.47:443</span><br><span class="line">	106.11.6.1:443</span><br><span class="line">	183.66.67.134:443</span><br><span class="line">	106.11.249.208:443</span><br><span class="line">	106.11.172.38:443</span><br><span class="line">	106.11.61.140:443</span><br><span class="line">	106.11.250.9:443</span><br><span class="line">	106.11.6.1:443</span><br><span class="line">	106.11.94.2:443</span><br><span class="line">	150.138.144.180:443</span><br><span class="line">	117.21.189.111:443</span><br><span class="line">	117.41.240.227:443</span><br><span class="line">	119.84.36.229:80</span><br><span class="line">	183.66.67.134:443</span><br><span class="line">	175.6.241.225:443</span><br><span class="line">	114.55.84.136:443</span><br><span class="line">	112.67.242.154:443</span><br><span class="line">	121.199.250.56:443 </span><br><span class="line">	118.112.15.6:443</span><br><span class="line">	180.163.159.109:443 </span><br><span class="line">	202.105.176.125:443</span><br><span class="line"></span><br><span class="line">#ip.cn</span><br><span class="line">	140.205.34.62</span><br><span class="line"></span><br><span class="line">#汇合</span><br><span class="line">	223.4.0.0/14	#阿里DNS</span><br><span class="line">	119.28.0.0/15	#腾讯云DSN</span><br><span class="line">	183.0.0.0/10	#广东电信</span><br><span class="line">	140.205.0.0/16	#ip.cn</span><br><span class="line">	59.32.0.0/12	#wechat-class</span><br><span class="line">	101.224.0.0/13</span><br><span class="line">	223.252.192.0/19	#网易云</span><br><span class="line">	59.111.128.0/17</span><br><span class="line">	14.16.0.0/12	#QQ</span><br><span class="line">	61.151.0.0/16	</span><br><span class="line">	183.0.0.0/10</span><br><span class="line">	183.64.0.0/13</span><br><span class="line">	180.96.0.0/11</span><br><span class="line">	180.160.0.0/12</span><br><span class="line">	14.208.0.0/12</span><br></pre></td></tr></table></figure>
<h1 id="5-参"><a href="#5-参" class="headerlink" title="5 参"></a>5 参</h1><p><a href="https://ocserv.gitlab.io" target="_blank" rel="noopener">https://ocserv.gitlab.io</a></p>
<p><a href="https://lowendbox.com/blog/install-openconnect-server-on-ubuntu-16-04/" target="_blank" rel="noopener">https://lowendbox.com/blog/install-openconnect-server-on-ubuntu-16-04/</a></p>
<p><a href="https://xuri.me/2016/03/19/ocserv-on-ubuntu-16-04-for-cisco-anyconnect-client.html" target="_blank" rel="noopener">https://xuri.me/2016/03/19/ocserv-on-ubuntu-16-04-for-cisco-anyconnect-client.html</a></p>
</div><div class="article-meta" style="max-width:800px"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenConnect-Server-VPN/">OpenConnect Server VPN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/anyconnect/">anyconnect</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ocserv/">ocserv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vpn/">vpn</a><span class="tag-list-count">1</span></li></ul></div></div><div class="article-comment" style="max-width:800px"><div class="ds-thread" id="ds-thread" data-thread-key="cjc395k5s0004zbpvccz98mtl" data-title="CentOS 7 搭建 OpenConnect Server VPN" data-url="https://zzongbh.github.io/c99fb8e8/" site-name="ueibo"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/5061ae88/"><i class="icon icon-arror-left"></i></a></li><li><a href="/4a17b156/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="zzongbh#gmail.com" title="email" target="_blank"><i class="icon icon-email"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2018 高脚猪<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>